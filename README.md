### Network 01418351 Protocol UDP Project
---
- Natthadit Phaungthongthip 6610450161
- Tontawan Janthai 6610450951
- Rungrisa Rueangsri 6610451079

# UDP File Transfer

‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ú‡πà‡∏≤‡∏ô **UDP** ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö **checksum** ‡πÅ‡∏•‡∏∞ **ACK** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î **packet loss** ‡∏´‡∏£‡∏∑‡∏≠ **corruption** ‡∏Ç‡∏∂‡πâ‡∏ô

---

## üìÇ ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

- `server.py` : ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Server ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå  
- `client.py` : ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Client ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå  
- `example.txt` : ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á

---

## 1Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ü‡∏•‡πå

1. ‡∏ß‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á (`example.txt`) ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö `server.py`  
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå `server.py` ‡πÅ‡∏•‡∏∞ `client.py` ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Directory ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

---

## 2Ô∏è‚É£ ‡∏£‡∏±‡∏ô Server

```bash
python server.py <port> [--loss <loss_rate>] [--corrupt <corrupt_rate>]
```
* \<port\> : ‡∏û‡∏≠‡∏£‡πå‡∏ï UDP ‡∏ó‡∏µ‡πà server ‡∏à‡∏∞‡∏ü‡∏±‡∏á ‡πÄ‡∏ä‡πà‡∏ô 8133
* --loss : ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á packet loss (0..1)
* --corrupt : ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á packet corruption (0..1)
‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
```bash
python server.py 8133 --loss 0.05 --corrupt 0.1
```

---

## 3Ô∏è‚É£ ‡∏£‡∏±‡∏ô Client

```bash
python client.py <server_ip> <port> <filename>
```
* \<server_ip\> : IP ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô server (‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÉ‡∏ä‡πâ 127.0.0.1)
* \<port\> : ‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà server ‡∏ü‡∏±‡∏á
* \<filename\> : ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å server
‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
```bash
python client.py 127.0.0.1 8133 example.txt
```

## 4Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

4.1 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏°‡∏µ loss/corrupt)
```bash
python server.py 8133
python client.py 127.0.0.1 8133 example.txt
```
* ‡∏Ñ‡∏ß‡∏£‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå received_example.txt ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö example.txt
* Console log ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á packet ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞ ACK

4.2 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö packet loss
```bash
python server.py 8133 --loss 0.2
python client.py 127.0.0.1 8133 example.txt
```
* Server ‡∏à‡∏∞ drop packet ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô (20%)
* Client ‡∏à‡∏∞ timeout ‡πÅ‡∏•‡πâ‡∏ß retry ‡∏à‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å packet

4.3 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö packet corruption
```bash
python server.py 8133 --corrupt 0.1
python client.py 127.0.0.1 8133 example.txt
```
* ‡∏ö‡∏≤‡∏á packet ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
* Client ‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö checksum ‡πÅ‡∏•‡∏∞ ‡∏•‡∏∞‡πÄ‡∏ß‡πâ‡∏ô packet ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢
* Server ‡∏à‡∏∞‡∏™‡πà‡∏á packet ‡∏ã‡πâ‡∏≥‡∏à‡∏ô client ‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏ö

4.4 ‡∏ó‡∏î‡∏™‡∏≠‡∏ö EOF ‡πÅ‡∏•‡∏∞ retry
* Server ‡∏™‡πà‡∏á EOF packet ‡πÄ‡∏õ‡πá‡∏ô packet ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
* Client ‡∏™‡πà‡∏á ACK ‡πÉ‡∏´‡πâ EOF
* ‡∏´‡∏≤‡∏Å packet ‡∏´‡∏£‡∏∑‡∏≠ ACK ‡∏Ç‡∏≠‡∏á EOF ‡∏´‡∏≤‡∏¢ server ‡∏à‡∏∞ retry ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á retry_limit

5Ô∏è‚É£ Workflow ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°

1. Client ‡∏™‡πà‡∏á ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå ‡πÑ‡∏õ‡∏¢‡∏±‡∏á server
2. Server ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô chunks ‡∏Ç‡∏ô‡∏≤‡∏î 1024 bytes
3. Server ‡∏ó‡∏≥ packet (header + checksum + data) ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á packet ‡∏ó‡∏µ‡∏•‡∏∞ sequence
4. Client ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö checksum + sequence
    * ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á ACK
    * ‡∏ú‡∏¥‡∏î ‚Üí ‡∏•‡∏∞‡πÄ‡∏ß‡πâ‡∏ô, server ‡∏à‡∏∞ retry

5. Server ‡∏™‡πà‡∏á EOF ‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏£‡πá‡∏à
6. Client ‡∏™‡πà‡∏á ACK ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö EOF
7. ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

---